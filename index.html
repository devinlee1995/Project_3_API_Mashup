<!DOCTYPE html>
<html lang = "en">
<head>
	<meta charset = "UTF-8">
	<title> PokeDex</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
	<script src="script.js"></script>
	
	<script type="text/javascript">

		// var types_color = {
		// 	"Normal"
		// 	"Fire"
		// 	"Fighting"	
		// 	"Water"
		// 	"Flying"	
		// 	"Grass"
		// 	"Poison"	
		// 	"Electric"
		// 	"Ground"	
		// 	"Psychic" 
		// 	"Rock"	
		// 	"Ice"
		// 	"Bug"	
		// 	"Dragon"
		// 	"Ghost"	
		// 	"Dark"
		// 	"Steel"	
		// 	"Fairy"
		// };

		function Pokemon() {
			this.name;
			this.types;
			this.image;
			this.id;
			this.versions;
			this.height;
			this.weight;
		}
		window.onload = function() {
			var search = document.getElementById("search");
			search.addEventListener("submit", function(e) {
				e.preventDefault();
				var name = search.getElementsByTagName("input")[0].value;
				console.log(name);

				$.ajax({
			     	type: "GET",
			      	url: 'https://pokeapi.co/api/v2/pokemon/'+ name,
			     	success: function (response) {

			     		$(".modal-wrapper").show(); //show our modal
    					//add the .modal-on class to <body>
    					$("body").addClass("modal-on"); 
			     		console.log(response);

			          	// document.getElementById('name').innerHTML = name;

			          	var pokemon = new Pokemon();

			          	pokemon.id=response.id;
			          	document.getElementById("pokedex").innerHTML = "#" + pokemon.id;
			          	console.log("Pokedex Id: " + pokemon.id);

			          	pokemon.name = response.name;
			          	document.getElementById("name").innerHTML = "Name: " + pokemon.name;
			          	console.log("Name: " + pokemon.name);

			          	pokemon.height = response.height;
			          	document.getElementById("height").innerHTML = "Height: " + pokemon.height;
			          	console.log("Height: " + pokemon.height);

			          	pokemon.weight = response.weight;
			          	document.getElementById("weight").innerHTML = "Width: " + pokemon.weight;
			          	console.log("Weight: " + pokemon.weight);
			          	
						var types =  [];
						for(index in response.types) {
							types.push(response.types[index].type.name);
						}	
						pokemon.types = types;
						document.getElementById("types").innerHTML = "Types: " + pokemon.types;
						console.log("types: " + types);

						var versions = [];
						for(index in response.game_indices) {
							versions.push(response.game_indices[index].version.name);
						}
						pokemon.versions = versions;
						console.log("Versions in: " + pokemon.versions);

			          	pokemon.image = response.sprites.front_default;
			          	var img = new Image();
			          	img.src = pokemon.image;
			          	$("#sideimage").html("");

			          	sideimage.appendChild(img);

			          	$(".exit").click(function(e){
							e.preventDefault();
							//basically the opposite of activate
								$(".modal-wrapper").hide();
							$("body").removeClass("modal-on");
						});


			      	}
				});

			});
		}

	</script>
	
	<link href= "CSS/style.css" type= "text/css" 
		rel= "stylesheet">

</head>

<body>

	<nav>
		<div id= "logo">
			<img src= "images/Pokemon_API.png" width= "150" height= "150">
		</div>
		<div id= "navigation">
			<div>
				<a class= "links" href="index.html">HOME</a>
			</div>

			<div>
				<a class= "links" href="aboutUs.html">ABOUT US</a>
			</div>
		</div> 
	</nav>

	<div id = "main_body"> 
		<div id = "search_box">
			<h2 id="Pokemon">Enter a Pokemon!</h2> 
			<form id = "search">
				<input type ="text" name = "name" placeholder = "Pokemon Name">
				<input type = "submit" class = "activate-modal"></a>
					<div class="modal-wrapper">
	  					<div class="modal">
	  						<a href="#" class="exit">X</a>
	  						<h1 id="pokedex"></h1>
	  						<div id="modal-content">
		  						<div id="sideimage">
		  							
		  						</div>
		  						<div id="modal-info">
		  							<div id="name">Name: </div>
		  							<div id="weight">Weight: </div>
		  							<div id="height">Height: </div>
		  							<div id="types">Type: </div>
		  						</div>
	  						</div>
	  					</div>
					</div>
			</form>
		</div>
	</div>



</body>
</html>